<div class="row" ng-cloak>
    <div class="widget">
      <div class="widget-header">
        <i class="fa fa-edit"></i> Edit your {{bud.type ? bud.type : 'bud'}}
        <a href="#" class="pull-right">Help</a>
      </div>
      <div class="widget-body">
        <form>
          <div class="clear-fix">
            <label for="requestTitle"><strong>Bud: </strong></label>
            <div class="form-group">
              <input
              class="form-control"
              type="text"
              name="budTitle"
              ng-disabled="budBox.disabled"
              ng-model="budBox.title"
              class="required" />
              <label for="file"><strong>Add file: </strong></label>
              <div class="input">
                 <input class="input-file" type="file" name="file"/>
              </div>
            </div>
          </div>
          <div class="clear-fix">
            <label for="type"><strong>Bud Type: </strong></label>
            <select ng-model="budBox.type" ng-change="setType(budBox.type)" ng-options="type.id as type.id for type in availableTypes">
            </select>
          </div>
          <div class="clear-fix">
            <label for="content"><strong>Content: </strong></label>
            <div class="form-group">
                <textarea
                ui-tinymce
                ng-model="budBox.content"
                class="form-control"
                name="message"
                placeholder="Type your bud here..."
                ng-disabled="budBox.disabled">
                </textarea>
                <span class="help-block">
                May the Qi be with you!
                </span>
            </div>
          </div>
        </form>
      </div>
    </div>
    <div class="clear-fix"></div>
    <div ui-view></div>
    <div class="clear-fix"></div>
    <div class="widget">
      <div class="widget-header">
        <i class="fa fa-key"></i> Choose privacy model
        <a href="#" class="pull-right">Help</a>
      </div>
      <div class="widget-body">
        <div class="well">
            <div class="form-group">
              <label for=""><strong>Privacy: </strong></label>
              <div class="radio">
                <label>
                  <input type="radio" name="optionsRadios"  ng-model="budBox.privacy" value="Private" checked>
                  This bud is non-sharable, only visible by the creator
                </label>
              </div>
              <div class="radio">
                <label>
                  <input type="radio" name="optionsRadios"  ng-model="budBox.privacy" value="Private2Share">
                  Sharable for creator and current actor
                </label>
              </div>
              <div class="radio">
                <label>
                  <input type="radio" name="optionsRadios"  ng-model="budBox.privacy" value="Free2Share">
                  Sharable for everyone
                </label>
              </div>
            </div>
            <input
            ng-if="budBox.action == 'create'"
            class="btn btn-primary btn-xl"
            ng-click="createBud($event)"
            value="Create bud"
            ng-disabled="!budBox.title || !budBox.privacy || !budBox.content"
            />
            <input
            ng-if="budBox.action == 'update'"
            class="btn btn-primary btn-xl"
            ng-click="updateBud($event)"
            value="Update bud"
            ng-disabled="!budBox.title || !budBox.privacy || !budBox.content"
            />
            <input
            ng-if="budBox.action == 'subbud'"
            class="btn btn-primary btn-xl"
            ng-click="createSubBud($event)"
            value="Create child bud"
            ng-disabled="!budBox.title || !budBox.privacy || !budBox.content"
            />
        </div>
      </div>
    </div>
    <div class="widget" ng-if="parentBud">
      <div class="widget-header">
        <i class="fa fa-leaf"> Parent bud: {{parentBud.title}}</i>
        <a href="#" class="pull-right">Help</a>
      </div>
      <div class="widget-body">
        <div ng-bind-html="parentBud.content"></div>
      </div>
    </div>
    <div class="clear-fix"></div>
    <div class="widget">
      <div class="widget-header">
        <i class="fa fa-eye"></i> Bud preview
      </div>
      <div class="widget-body">
        <div class="page-header">
            <h1>{{budBox.title}}</h1>
        </div>
        <div ng-bind-html="budBox.content"></div>
      </div>
    </div>
</div>



<style type="text/css">
  /* Message box */

  .message-box {
    background-color: #fdfdfd;
    border-radius: 7px;
  }

  .message-box form {
    padding-right: 10px;
    padding-left: 10px;
    margin-bottom: 10px;
  }

  .message-box form textarea {
    resize: vertical;
    margin-top: 10px;
    margin-bottom: 5px;
    width: 100%;
    box-sizing: border-box;
    height: 65px;
  }

  .message-box-tools {
    height: 31px;
  }
</style>
